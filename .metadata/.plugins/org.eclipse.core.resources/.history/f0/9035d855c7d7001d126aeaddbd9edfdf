package app;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Scanner;

import entities.Department;
import entities.HourContract;
import entities.Worker;
import entities.WorkerLevel;

public class Main {

	public static void main(String[] args) {
				
		Scanner sc = new Scanner(System.in);
		
		System.out.print("enter dp name: ");
		String dpName = sc.nextLine();
		
		System.out.println("enter work data: ");
		System.out.println("name: ");
		String workerName = sc.next();
		System.out.println("level: ");
		sc.nextLine();
		String workerLevel = sc.nextLine();
		System.out.println("Base salary: ");
		double baseSalary = sc.nextDouble();
		
		Worker worker = new Worker(workerName, WorkerLevel.valueOf(workerLevel), baseSalary, new Department(dpName));
		
		System.out.println("how many contracts?");
		int n = sc.nextInt();
		
		for (int i = 1; i <= n; i++) {
			System.out.println("Enter contract #" + i + " data: ");
			System.out.println("dd/mm/yyy: ");
			String date = sc.next();
			LocalDate contractDate = LocalDate.parse(date, DateTimeFormatter.ofPattern("dd/MM/yyyy")); 
			System.out.println("value per hour: ");
			double value = sc.nextDouble();
			System.out.println("duration:");
			Integer duration = sc.nextInt();
			
			HourContract contract = new HourContract(contractDate, value, duration);
			worker.addContract(contract);
		}
		
		System.out.println("enter M and Y to calculate income: ");
		String my = sc.nextLine();
		int m = Integer.parseInt(my);
		
		System.out.println("name: " + worker.getName());
		System.out.println("Dp: " + worker.getDepartment().getName());
		System.out.println("income: " + String.format("%.2f", worker.income(my.charAt(0), my.charAt(1))));
		
		sc.close();
	
		
		
		

	}
}
